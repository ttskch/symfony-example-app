{% set row1 %}{% block row1 %}{% endblock %}{% endset %}
{% set row1_col1 %}{% block row1_col1 %}{% endblock %}{% endset %}
{% set row1_col2 %}{% block row1_col2 %}{% endblock %}{% endset %}

{% set row2 %}{% block row2 %}{% endblock %}{% endset %}
{% set row2_col1 %}{% block row2_col1 %}{% endblock %}{% endset %}
{% set row2_col2 %}{% block row2_col2 %}{% endblock %}{% endset %}

{% set row3 %}{% block row3 %}{% endblock %}{% endset %}
{% set row3_col1 %}{% block row3_col1 %}{% endblock %}{% endset %}
{% set row3_col2 %}{% block row3_col2 %}{% endblock %}{% endset %}

{{ form_start(form, {method: 'get', attr: {class: 'form-inline align-items-start'}}) }}
<div class="container ml-0 px-0 mb-3">
  <div class="d-flex flex-column flex-sm-row">

    {# inputs #}
    <div class="flex-grow-1 d-flex flex-column">
      {% for i in 1..3 %}
        {% set row = attribute(_context, 'row'~i) %}
        {% set col1 = attribute(_context, 'row'~i~'_col1') %}
        {% set col2 = attribute(_context, 'row'~i~'_col2') %}

        {% if row or col1 or col2 %}
          <div class="{{ i > 1 ? 'mt-2' : '' }}">
            {% if row %}
              {{ row }}
            {% else %}
              <div class="d-flex flex-column flex-sm-row">
                {% if col1 %}
                  <div class="w-100 mr-sm-2">
                    {{ col1 }}
                  </div>
                {% endif %}

                {% if col1 or col2 %}
                  <div class="w-100 mt-2 mt-sm-0" style="width:1px">
                    {{ col2 }}
                  </div>
                {% endif %}
              </div>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
    </div>

    {# submit button #}
    <div class="mt-2 mt-sm-0 ml-sm-2">
      <button type="submit" class="btn btn-block btn-outline-secondary"><i class="fa fa-search"></i></button>
    </div>
  </div>
</div>
{{ form_end(form) }}
